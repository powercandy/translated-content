---
title: Firefox 7 for developers
slug: Mozilla/Firefox/Releases/7
tags:
  - Firefox
  - Firefox 7
  - Gecko 7
translation_of: Mozilla/Firefox/Releases/7
---
<p>Firefox 7 は2011 年 9 月 27 日にリリースされました。このページは Firefox 7 のリリースにあたり、開発者に関係する変更についてまとめたものです。</p>
<h2 id="Changes_for_web_developers" name="Changes_for_web_developers">Web 開発者向けの変更点一覧</h2>
<h3 id="HTML">HTML</h3>
<ul>
  <li>{{ domxref("HTMLHeadElement") }} の <code>profile</code> プロパティが削除されました。このプロパティは {{ gecko("2.0") }} から非推奨となっていました。</li>
  <li>{{ domxref("HTMLImageElement") }} の <code>x</code> プロパティと <code>y</code> プロパティが削除されました。</li>
  <li>{{ domxref("HTMLSelectElement") }} の <code>add()</code> メソッドの <code>before</code> 引数が optional となりました。</li>
  <li>{{ HTMLElement("body") }} の {{ htmlattrxref("background", "body") }} 属性が URI として解決されなくなりました。この変更は HTML 仕様への準拠によるものです。</li>
  <li>{{ HTMLElement("option") }} の {{ htmlattrxref("label", "option") }} 属性が指定されていない場合、要素の内容テキストを反映するようになりました。</li>
</ul>
<h4 id="Canvas">Canvas</h4>
<ul>
  <li><code>setTransform()</code>, <code>bezierCurveTo()</code>, <code>arcTo()</code> に不正な値を与え呼び出したとき、例外が投げられなくなりました。これらは無視されます。</li>
  <li><a href="/ja/docs/DOM/CanvasRenderingContext2D#isPointInPath()" title="DOM/CanvasRenderingContext2D#isPointInPath()"><code>isPointInPath()</code></a> メソッドに与えられた点と現在のパスを比較するにあたり、変換マトリクスを適切に考慮するようになりました。</li>
  <li><code>strokeRect()</code> メソッドが幅 0 高さ 0 で呼び出された場合、何もしなくなりました。</li>
  <li><a href="/ja/docs/DOM/CanvasRenderingContext2D#drawImage()" title="DOM/CanvasRenderingContext2D#drawImage()"><code>drawImage()</code></a> メソッドが幅 0 もしくは高さ 0 で呼び出された場合、{{ HTMLElement("canvas") }} は <code>INVALID_STATE_ERR</code> を投げるようになりました。</li>
  <li><a href="/ja/docs/DOM/CanvasRenderingContext2D#drawImage()" title="DOM/CanvasRenderingContext2D#drawImage()"><code>drawImage()</code></a> メソッドが非定形の座標で呼び出された場合に、例外が投げられなくなりました。</li>
  <li><code>toDataURL()</code> が JPEG の品質を制御する引数を受け付けるようになりました。</li>
  <li><code>globalCompositeOperation</code> の値から、非標準だった <code>clear</code> と <code>over</code> が削除されました。</li>
  <li><a href="/ja/docs/Canvas_tutorial/Applying_styles_and_colors#Shadows" title="Canvas_tutorial/Applying_styles_and_colors#Shadows">影</a> が <code>source-over</code> 合成処理の場合にのみ描画されるようになりました。</li>
  <li>Canvas の塗りつぶし方を設定する <a href="/ja/docs/DOM/CanvasRenderingContext2D#Attributes" title="DOM/CanvasRenderingContext2D#Attributes"><code>mozFillRule</code></a> アトリビュートが追加されました。</li>
</ul>
<h3 id="CSS">CSS</h3>
<ul>
  <li>{{ cssxref("text-overflow") }} がサポートされました。</li>
  <li>{{ cssxref("orient", "-moz-orient") }} が修正され、縦配置の {{ HTMLElement("progress") }} でも進行方向が適切なものになりました。</li>
</ul>
<h3 id="MathML">MathML</h3>
<ul>
  <li>XLink href が復活し、また MathML3 の <code>href</code> 属性もサポートされました。リンクには後者の属性を使うことが望まれます。</li>
  <li>{{ MathMLElement("mpadded") }} 要素に <code>voffset</code> 属性のサポートが追加されました。また <code>lspace</code> 属性の挙動も修正されました。</li>
  <li>トップレベル要素である {{ MathMLElement("math") }} 要素が {{ MathMLElement("mstyle") }} 要素のもつ属性すべてを受け入れるようになりました。</li>
  <li><a class="external" href="http://www.ctan.org/tex-archive/fonts/Asana-Math/">Asana Math</a> フォントのサポートが追加されました。</li>
  <li>{{ MathMLElement("mfrac") }} 要素によって表される分数の線の太さ <code>medium</code> が修正され、規定の太さになりました。</li>
  <li><a href="/ja/docs/MathML/Attributes/Values#Constants_(namedspaces)" title="MathML/Attributes/Values#Constants_(namedspaces)">負のスペースを表すキーワード</a> がサポートされました。</li>
</ul>
<h3 id="DOM">DOM</h3>
<ul>
  <li>{{ domxref("File") }} インターフェースの非標準なメソッド <code>getAsBinary()</code>, <code>getAsDataURL()</code>, <code>getAsText()</code> が削除されました。あわせて、非標準なプロパティ <code>fileName</code> と <code>fileSize</code>も削除されました。</li>
  <li>{{ domxref("Blob") }} によってデータが指定され、また <code>Content-Disposition</code> HTTP ヘッダが送信されたとき、{{ domxref("XMLHttpRequest/FormData", "FormData") }} インターフェースはファイル名を空文字列として報告しないようになりました。これによって幾つかのサーバに起こっていたエラーが解消されます。</li>
  <li>{{ domxref("element.dir") }} 属性が結果を常に小文字で返すようになりました。これは HTML 仕様の要件によるものです。</li>
  <li>{{ domxref("FileReader") }} の <code>readAsArrayBuffer()</code> メソッドが実装されました。</li>
  <li>{{ domxref("document.createEntityReference") }} が削除されました。このメソッドは適切に実装されておらず、他のブラウザのほとんどで実装されていませんでした。</li>
  <li><code>document.normalizeDocument</code> が削除されました。今後は {{ domxref("Node.normalize") }} を利用してください。</li>
  <li><code>index</code> が範囲外の場合、{{ domxref("DOMTokenList.item") }} が <code>undefined</code> を返すようになりました。これまでは <code>null</code> を返していました。</li>
  <li><code>Node.getFeature</code> が削除されました。</li>
  <li><code>HTMLInsElement</code> インターフェースと <code>HTMLDelElement</code> インターフェースが削除されました。これは {{ HTMLElement("ins") }} と {{ HTMLElement("del") }} 要素が実際には {{ domxref("HTMLModElement") }} を使用していたためです。</li>
  <li>新しい <a class="external" href="http://www.w3.org/TR/dom/">DOM4</a> 仕様にある {{ domxref("Attr") }} が {{ domxref("Node") }} を継承しない (DOM Core 1, 2, 3 まではしていた) という定義に準拠するため、{{ domxref("Attr") }} インターフェース上の {{ domxref("Node") }}} プロパティやメソッドについて、将来的にこれらを削除するといった意味の <a href="/ja/docs/DOM/Attr#Deprecated_properties_and_methods" title="DOM/Attr#Deprecated_properties_and_methods">警告を出す</a> ようになりました。</li>
  <li>{{ domxref("Window") }} オブジェクトに {{ domxref("window.ondeviceorientation") }} プロパティと {{ domxref("window.ondevicemotion") }} プロパティのサポートを追加しました。</li>
  <li>{{ domxref("window.resizeTo") }}、{{ domxref("window.resizeBy") }}、{{ domxref("window.moveTo") }}、{{ domxref("window.moveBy") }} はメインウィンドウに適用されなくなりました。</li>
</ul>
<h3 id="JavaScript">JavaScript</h3>
<ul>
  <li><code><a href="/ja/docs/JavaScript/Reference/Global_Objects/Function/arity" title="JavaScript/Reference/Global_Objects/Function/arity">Function.arity</a></code> プロパティが削除されました。今後は <code><a href="/ja/docs/JavaScript/Reference/Global_Objects/Function/length" title="JavaScript/Reference/Global_Objects/Function/length">Function.length</a></code> を利用してください。</li>
</ul>
<h3 id="WebSocket">WebSocket</h3>
<ul>
  <li>設定項目に <code>network.websocket.max-connections</code> が導入されました。これは WebSocket の同時最大接続数を決定するために使用されます。既定値は 200 です。</li>
  <li>WebSocket プロトコルで使用するプロトコルバージョンが、IETF draft 10 で指定されているバージョン 8 になりました。Firefox 6 ではバージョン 7 が使われていました。</li>
  <li>WebSocket API が Firefox Mobile でも利用可能になりました。</li>
</ul>
<h3 id="Console_API">Console API</h3>
<ul>
  <li><a href="/ja/docs/Using_the_Web_Console" title="Using the Web Console">web console</a> が開かれる前に <code>console.log</code> によって記録されたメッセージもあらかじめ記録され、<a href="/ja/docs/Using_the_Web_Console" title="Using the Web Console">web console</a> が開かれた時に表示されるようになりました。</li>
</ul>
<div class="changelog">
  <h3 id="Web_Timing">Web Timing</h3>
  <ul>
    <li><a class="external" href="http://www.w3.org/TR/navigation-timing/">Navigation Timing</a> 仕様の初期実装が完了しました。</li>
  </ul>
  <h3 id="XML">XML</h3>
  <ul>
    <li>XSLT スタイルシートはこれまでサポートされていた <code>text/xsl</code> に加えて、<code>正式な </code>MIME 型<code> application/xslt+xml</code> も利用可能になりました。(スタイルシート処理命令もしくは <a class="external" href="http://tools.ietf.org/html/rfc5988">HTTP Link ヘッダ</a>で利用できます。)</li>
  </ul>
</div>
<h2 id="Mozilla_開発者とアドオン開発者向けの変更点">Mozilla 開発者とアドオン開発者向けの変更点</h2>
<p>これらの変更は、アドオン開発者と、Mozilla 本体のコードに関わっている開発者の双方に影響するものです。アドオン開発者は <a href="/ja/docs/Firefox/Updating_extensions_for_Firefox_7" title="Firefox/Updating_extensions_for_Firefox_7">アドオンの Firefox 7 対応</a> に書かれている追加情報も参照してください。</p>
<div class="note">
  <strong>注:</strong> Firefox 7 では、従来のメジャーリリースと同様に、バイナリコンポーネントをコンパイルし直す必要があります。詳しくは <a href="/ja/docs/Developer_Guide/Interface_Compatibility#Binary_Interfaces" title="Developer_Guide/Interface_Compatibility#Binary_Interfaces">バイナリインタフェース</a> をご覧ください。</div>
<h3 id="JavaScript_コードモジュール">JavaScript コードモジュール</h3>
<h4 id="FileUtils.jsm">FileUtils.jsm</h4>
<ul>
  <li>書き込みのための、安全でない状態のファイル出力ストリームを開ける <code>openFileOutputStream()</code> メソッドが追加されました。</li>
</ul>
<h4 id="AddonManager.jsm">AddonManager.jsm</h4>
<ul>
  <li>アプリケーション起動中に変更が行われたアドオンの一覧を管理できるメソッドがアドオンマネージャに追加されました。<a href="/ja/docs/Addons/Add-on_Manager/AddonManager#addStartupChange%28%29" title="Addons/Add-on_Manager/AddonManager#addStartupChange%28%29"><code>addStartupChange()</code></a>、<a href="/ja/docs/Addons/Add-on_Manager/AddonManager#removeStartupChange%28%29" title="Addons/Add-on_Manager/AddonManager#removeStartupChange%28%29"><code>removeStartupChange()</code></a>、<a href="/ja/docs/Addons/Add-on_Manager/AddonManager#getStartupChanges%28%29" title="Addons/Add-on_Manager/AddonManager#getStartupChanges%28%29"><code>getStartupChanges()</code></a> の 3 つです。</li>
</ul>
<h3 id="XUL">XUL</h3>
<ul>
  <li><a href="/ja/docs/XUL/tree" title="XUL/tree"><code>tree</code></a> 要素で、<a href="/ja/docs/XUL/Attribute/datasources" title="XUL/Attribute/datasources"><code>datasources</code></a> 属性によって参照されたノードがすべて <code>id</code> 属性で指定された固有 ID を持っていた場合、3 種類の公開状態を記憶できるようになりました。</li>
  <li><a href="/ja/docs/XUL/panel" title="XUL/panel"><code>panel</code></a> 要素で、新しい <a href="/ja/docs/XUL/Attribute/backdrag" title="XUL/Attribute/backdrag"><code>backdrag</code></a> 属性を使って、<a href="/ja/docs/XUL/PopupGuide/Panels#Letting_panels_be_dragged_by_grabbing_the_background" title="XUL/PopupGuide/Panels#Letting_panels_be_dragged_by_grabbing_the_background">ユーザがバックグラウンドの任意の場所をクリックして、その要素をドラッグできるように</a> 設定することが可能となりました。</li>
</ul>
<h3 id="XPCOM">XPCOM</h3>
<ul>
  <li><a href="/ja/docs/Components.utils.schedulePreciseGC" title="Components.utils.schedulePreciseGC"><code>Components.utils.schedulePreciseGC()</code></a> メソッドが追加されました。これは、以後どこかの時点で JavaScript コードが何も実行されていないときに、完全なガベージコレクション処理を行う予定を入れられるものです。</li>
  <li><a href="/ja/docs/Components.utils.unload" title="Components.utils.unload"><code>Components.utils.unload()</code></a> メソッドが追加されました。これは、<a href="/ja/docs/Components.utils.load" title="Components.utils.load"><code>Components.utils.load()</code></a> で読み込まれた JavaScript コードモジュールを破棄できるようにするものです。</li>
</ul>
<h3 id="ユーザ体験の変更">ユーザ体験の変更</h3>
<ul>
  <li>拡張機能のオプションが、再起動不要型と従来型のいずれでも <a href="/ja/docs/Extensions/Inline_Options" title="Extensions/Inline_Options">アドオンマネージャ内に表示</a> されるようになりました。</li>
  <li>ダウンロードされたファイルの保存先がサイトごとに記憶されるようになりました。このデータは <a href="/ja/docs/JavaScript_code_modules/DownloadLastDir.jsm" title="JavaScript_code_modules/DownloadLastDir.jsm">DownloadLastDir.jsm</a> を使ってアクセスできます。</li>
</ul>
<h3 id="ビルドシステムの変更">ビルドシステムの変更</h3>
<ul>
  <li>ActiveX 組み込み API はビルドされなくなり、ビルドシステムでのサポートも削除されました。関連インタフェースも削除されました。下記 <a href="#削除されたインタフェース">削除されたインタフェース</a> を参照してください。</li>
  <li>Windows でのビルド時に <code>-Zc:wchar_t-</code> を指定できなくなりました。詳しくは、更新された <a href="/ja/docs/Developer_Guide/Build_Instructions#Build_and_install" title="Developer_Guide/Build_Instructions#Build_and_install">ビルド手順</a> をご覧ください。</li>
</ul>
<h3 id="インタフェースの変更">インタフェースの変更</h3>
<ul>
  <li><a href="/ja/docs/XPCOM_Interface_Reference/nsISocketTransport" title="XPCOM_Interface_Reference/nsISocketTransport"><code>nsISocketTransport</code></a> に新しい接続フラグ <code>DISABLE_IPV6</code> が追加されました。これは、利用可能な IPv6 アドレスがあってもそれを無視して、IPv4 アドレスのみに接続するようソケットを設定するものです。また、<a href="/ja/docs/XPCOM_Interface_Reference/nsIDNSService" title="XPCOM_Interface_Reference/nsIDNSService"><code>nsIDNSService</code></a> に新しい解決フラグ <code>RESOLVE_DISABLE_IPV6</code> が追加されました。これは、利用可能な IPv6 アドレスがあってもそれを無視して、IPv4 ホストのみを考慮してドメイン名解決を行うものです。これらの変更は、IPv4 と IPv6 の両方に対応している (その中でも特に IPv6 接続がうまくいかない) ホストへ接続する際の応答時間を短縮する <a class="external" href="http://tools.ietf.org/html/draft-wing-http-new-tech-00">「幸せな目玉」戦略</a> を実装するために使われます。</li>
  <li><a href="/ja/docs/XPCOM_Interface_Reference/inIDOMUtils" title="XPCOM_Interface_Reference/inIDOMUtils"><code>inIDOMUtils</code></a> に 2 つのメソッドが追加されました。あるノードの子ノード一覧を返す <a href="/ja/docs/XPCOM_Interface_Reference/inIDOMUtils#getChildrenForNode%28%29" title="XPCOM_Interface_Reference/inIDOMUtils#getChildrenForNode%28%29"><code>getChildrenForNode()</code></a> と、選択範囲内で使用されているフォントフェース一覧を返す <a href="/ja/docs/XPCOM_Interface_Reference/inIDOMUtils#getUsedFontFaces%28%29" title="XPCOM_Interface_Reference/inIDOMUtils#getUsedFontFaces%28%29"><code>getUsedFontFaces()</code></a> です。</li>
  <li><code>nsIMarkupDocumentViewer_MOZILLA_2_0_BRANCH</code> インタフェースは <a href="/ja/docs/XPCOM_Interface_Reference/nsIMarkupDocumentViewer" title="XPCOM_Interface_Reference/nsIMarkupDocumentViewer"><code>nsIMarkupDocumentViewer</code></a> インタフェースへ統合されました。</li>
  <li><code>nsIDOMWindow2</code> インタフェースは <a href="/ja/docs/XPCOM_Interface_Reference/nsIDOMWindow" title="XPCOM_Interface_Reference/nsIDOMWindow"><code>nsIDOMWindow</code></a> インタフェースへ統合されました。</li>
  <li><code>nsIDOMWindow_2_0_BRANCH</code> インタフェースは <a href="/ja/docs/XPCOM_Interface_Reference/nsIDOMWindowInternal" title="XPCOM_Interface_Reference/nsIDOMWindowInternal"><code>nsIDOMWindowInternal</code></a> インタフェースへ統合されました。</li>
  <li>URI 引数付きで <a href="/ja/docs/XPCOM_Interface_Reference/nsINavHistoryObserver" title="XPCOM_Interface_Reference/nsINavHistoryObserver"><code>nsINavHistoryObserver</code></a> メソッドを使う場合、GUID も必要となります。</li>
  <li><code>nsISHistory_2_0_BRANCH</code> インタフェースは <a href="/ja/docs/XPCOM_Interface_Reference/nsISHistory" title="XPCOM_Interface_Reference/nsISHistory"><code>nsISHistory</code></a> インタフェースへ統合されました。</li>
  <li><a href="/ja/docs/XPCOM_Interface_Reference/nsITelemetry" title="XPCOM_Interface_Reference/nsITelemetry"><code>nsITelemetry</code></a> に、ID からヒストグラムを返す <a href="/ja/docs/XPCOM_Interface_Reference/nsITelemetry#getHistogramById%28%29" title="XPCOM_Interface_Reference/nsITelemetry#getHistogramById%28%29"><code>getHistogramById()</code></a> メソッドと、<code>false</code> 設定時に <a class="external" href="http://mozilla.jp/legal/privacy/firefox/#telemetry">使用統計情報 (Telemetry)</a> の記録を無効化できる <code>canRecord</code> 属性が追加されました。使用統計情報はプライベートブラウジングモードでは記録されなくなりました。({{ bug("661574") }}、{{ bug("661573") }})<br>
    <a href="/ja/docs/XPCOM_Interface_Reference/nsITelemetry#newHistogram%28%29" title="XPCOM_Interface_Reference/nsITelemetry#newHistogram%28%29"><code>newHistogram()</code></a> で定義された使用統計ヒストグラムは、Mozilla への定期報告に含まれません。</li>
  <li><a href="/ja/docs/XPCOM_Interface_Reference/nsIMemoryReporter" title="XPCOM_Interface_Reference/nsIMemoryReporter"><code>nsIMemoryReporter</code></a> インタフェースに大幅な変更が行われました。使用する場合はコードに変更を加える必要があるでしょう。</li>
  <li><a href="/ja/docs/nsIXMLHttpRequest#setRequestHeader%28%29" title="nsIXMLHttpRequest#setRequestHeader%28%29"><code>nsIXMLHttpRequest.setRequestHeader()</code></a> によって設定されたヘッダが、リダイレクトを辿る際にもリクエストに含まれて送信されるようになりました。これまでこの方法で設定されたヘッダは送信されていませんでした。</li>
  <li><a href="/ja/docs/XPCOM_Interface_Reference/nsIDocShell" title="XPCOM_Interface_Reference/nsIDocShell"><code>nsIDocShell</code></a> に <code>allowWindowControl</code> 属性が追加されました。<code>true</code> を設定すると、docshell のコンテンツがウィンドウをコントロールできるようになります (ウィンドウの移動やサイズ変更など)。</li>
  <li><code>nsIThreadInternal2</code> インタフェースは <a href="/ja/docs/XPCOM_Interface_Reference/nsIThreadInternal" title="XPCOM_Interface_Reference/nsIThreadInternal"><code>nsIThreadInternal</code></a> インタフェースへ統合されました。</li>
</ul>
<h4 id="新しいインタフェース">新しいインタフェース</h4>
<dl>
  <dt>
    <a href="/ja/docs/XPCOM_Interface_Reference/nsIDOMFontFace" title="XPCOM_Interface_Reference/nsIDOMFontFace"><code>nsIDOMFontFace</code></a></dt>
  <dd>
    ひとつのフォントフェースを表します。</dd>
  <dt>
    <a href="/ja/docs/XPCOM_Interface_Reference/nsIDOMFontFaceList" title="XPCOM_Interface_Reference/nsIDOMFontFaceList"><code>nsIDOMFontFaceList</code></a></dt>
  <dd>
    <a href="/ja/docs/XPCOM_Interface_Reference/nsIDOMFontFace" title="XPCOM_Interface_Reference/nsIDOMFontFace"><code>nsIDOMFontFace</code></a> で表されたフォントフェースの一覧を表します。</dd>
</dl>
<h4 id="削除されたインタフェース">削除されたインタフェース</h4>
<p>以下のインタフェースは、不要となり削除された実装です。</p>
<ul>
  <li><code>nsIDOM3Attr</code></li>
  <li><code>nsIDOM3Node</code></li>
  <li><code>nsIDOM3TypeInfo</code></li>
  <li><code>nsIDOM3Text</code></li>
  <li><code>nsIDOMDocumentStyle</code></li>
  <li><code>nsIDOMNSDocument</code></li>
  <li><code>nsIDOMNSFeatureFactory</code></li>
  <li><a href="/ja/docs/XPCOM_Interface_Reference/nsIDOMNSHTMLDocument" title="XPCOM_Interface_Reference/nsIDOMNSHTMLDocument"><code>nsIDOMNSHTMLDocument</code></a></li>
  <li><code>nsIDOMNSHTMLFormElement</code></li>
  <li><code>nsIDOMNSHTMLHRElement</code></li>
  <li><code>nsIDOMNSHTMLTextAreaElement</code></li>
</ul>
<p>以下のインタフェースは、ActiveX 組み込み API 廃止の一環として削除されました。</p>
<ul>
  <li><code>DITestScriptHelper</code></li>
  <li><code>DWebBrowserEvents</code></li>
  <li><code>DWebBrowserEvents2</code></li>
  <li><a href="/ja/docs/XPCOM_Interface_Reference/IDispatch" title="XPCOM_Interface_Reference/IDispatch"><code>IDispatch</code></a></li>
  <li><code>IMozControlBridge</code></li>
  <li><code>IMozPluginHostCtrl</code></li>
  <li><code>IWebBrowser</code></li>
  <li><code>IWebBrowser2</code></li>
  <li><code>IWebBrowserApp</code></li>
  <li><code>IXMLDocument</code></li>
  <li><code>IXMLElement</code></li>
  <li><code>IXMLElementCollection</code></li>
  <li><code>IXMLError</code></li>
  <li><code>nsIActiveXSecurityPolicy</code></li>
  <li><a href="/ja/docs/XPCOM_Interface_Reference/nsIDispatchSupport" title="XPCOM_Interface_Reference/nsIDispatchSupport"><code>nsIDispatchSupport</code></a></li>
  <li><code>nsIMozAxPlugin</code></li>
  <li><code>nsIScriptEventHandler</code></li>
  <li><code>nsIScriptEventManager</code></li>
</ul>
<h2 id="See_also" name="See_also">参考</h2>
<ul>
  <li><a class="external" href="http://mozilla.jp/firefox/preview/faq/">高速リリースサイクルに関するよくある質問</a></li>
</ul>
<div>{{Firefox_for_developers('6')}}</div>
